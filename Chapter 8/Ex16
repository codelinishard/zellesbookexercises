#added elif key == "Escape":
#            entry.undraw()
#            return
# to handleClick and that's all

from graphics import *

def handleKey(k, win):
    if k == "1":
        win.setBackground("pink")
    elif k == "2":
        win.setBackground("white")
    elif k == "3":
        win.setBackground("lightgray")
    elif k == "4":
        win.setBackground("lightblue")

def handleClick(pt, win):
    # create an Entry for user to type in
    entry = Entry(pt, 10)
    entry.draw(win)
    
    # Go modal: loop until user types <Enter> key
    while True:
        key = win.getKey()
        if key == "Return": break
        elif key == "Escape":
            entry.undraw()
            return
    
    # undraw the entry and create and draw Text()
    entry.undraw()
    typed = entry.getText()
    Text(pt, typed).draw(win)
    
    # clear (ignore) any mouse click that occurred during text entry
    win.checkMouse()

def main():
    win = GraphWin("Click and Type", 500, 500)
    
    # Event Loop: handle key presses and mouse clicks until the user
    # presses the "q" key.
    
    while True:
        key = win.checkKey()
        if key == "q":  # loop exit
            break
        
        if key:
            handleKey(key, win)
        
        pt = win.checkMouse()
        if pt:
            handleClick(pt, win)
    
    win.close()

main()
